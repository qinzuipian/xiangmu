webpackJsonp([28],{RYbn:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("6sKG"),o=a.n(i),s=a("6iV/"),n=a.n(s),l=a("P8yQ"),r={data:function(){return{foulData:[],ruleList:[],startTime:"",endTime:"",grade:" ",gradeoptions:[{value:"##",label:"全部"},{value:"11",label:"一级"},{value:"21",label:"二级"},{value:"31",label:"三级"}],hospitalCode:"",hospitalCodes:[],city:"",cityoptions:[],area:"",areaoptions:[],town:"",townoptions:[],hospitalId:"",seriesName:"",slowflag:"",slow:!1,yiyuancode:""}},methods:{getname:function(){localStorage.setItem("hometext","【慢病补偿情况分析（医院）】"),1==localStorage.getItem("limited")?this.slow=!0:2==localStorage.getItem("limited")&&(this.slow=!1)},getSlow:function(){var e=this;this.slowflag=1;var t,a=this.getAreaCode(),i=this,s=document.getElementById("slowContainter"),r=l.init(s);r.showLoading({text:"加载加载加载....."}),1==localStorage.getItem("limited")?(this.yiyuancode=this.hospitalCode,t=this.grade):2==localStorage.getItem("limited")&&(this.yiyuancode=localStorage.getItem("othercode"),t="##"),o()({method:"post",url:o.a.PARK_API+"/xnhidc/backstage/getHospitalData_chronic",data:n.a.stringify({sdate:this.startTime,edate:this.endTime,hospitalGrade:t,hospitalCode:this.yiyuancode,areaCode:a}),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(t){if(t.data.success){r.hideLoading();var a=t.data.data;l.dispose(r),r=l.init(s);for(var o=[],n=[],d=[],c=[],h=[],p=[],g=[],m=[],u=[],y=0;y<a.length;y++)u[y]=a[y].医院编码,o[y]=a[y].医院名称,n[y]=a[y].慢病总人数,d[y]=a[y].总医疗费用,c[y]=a[y].人均医疗费用,h[y]=a[y].药品费用,p[y]=a[y].自费费用,g[y]=a[y].可报金额,m[y]=a[y].报销金额;var f={};f.dataAxis=o,f.totalCount=n,f.totalFee=d,f.personFee=c,f.drgFee=h,f.selfFee=p,f.payableFee=g,f.payFee=m;var v={legend:{data:["总医疗费用","药品费用","自费费用","可报金额","报销金额","人均医疗费用","慢病总人数"],align:"left",left:10},tooltip:{},dataZoom:[{id:"dataZoomX",type:"slider",xAxisIndex:[0],filterMode:"filter"},{id:"dataZoomY",type:"slider",yAxisIndex:[0],filterMode:"empty"}],toolbox:{show:!0,feature:{mark:{show:!0},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},xAxis:{type:"category",data:f.dataAxis},yAxis:{},series:[{name:"总医疗费用",type:"bar",stack:"one",barMaxWidth:"60",data:f.totalFee},{name:"药品费用",type:"bar",stack:"one",barMaxWidth:"60",data:f.drgFee},{name:"自费费用",type:"bar",stack:"one",barMaxWidth:"60",data:f.selfFee},{name:"可报金额",type:"bar",stack:"one",barMaxWidth:"60",data:f.payableFee},{name:"报销金额",type:"bar",stack:"one",barMaxWidth:"60",data:f.payFee},{name:"慢病总人数",type:"bar",stack:"two",barMaxWidth:"60",data:f.totalCount},{name:"人均医疗费用",type:"bar",stack:"two",barMaxWidth:"60",data:f.personFee}]};r.setOption(v),r.on("click",function(e){i.hospitalId=u[e.dataIndex],i.seriesName=e.seriesName,i.areaLoading()})}else e.$message.error("请检查网络！")})},areaLoading:function(){var e,t=this;if(this.slowflag=2,"药品费用"===this.seriesName)e="1";else{if("总医疗费用"!==this.seriesName)return;e="2"}var a=this,i=document.getElementById("slowContainter"),s=l.init(i);s.showLoading({text:"加载加载加载....."}),o()({method:"post",url:o.a.PARK_API+"/xnhidc/backstage/getHospitalData_cateogry",data:n.a.stringify({sdate:this.startTime,edate:this.endTime,hospitalCode:this.hospitalId,flag:e}),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){if(e.data.success){console.log(e),s.hideLoading(),l.dispose(s),s=l.init(i);for(var o=e.data.data,n=[],r=[],d=[],c=0;c<o.length;c++)n[c]=o[c].类别编码,r[c]=o[c].类别名称,d[c]=o[c].类别费用;var h={legend:{data:["类别费用"],align:"left",left:10},tooltip:{},dataZoom:[{id:"dataZoomX",type:"slider",xAxisIndex:[0],filterMode:"filter"},{id:"dataZoomY",type:"slider",yAxisIndex:[0],filterMode:"empty"}],toolbox:{show:!0,feature:{mark:{show:!0},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},xAxis:{type:"category",data:r},yAxis:{type:"value"},series:[{name:"类别费用",type:"bar",barMaxWidth:"60",data:d}]};s.setOption(h),s.on("click",function(e){a.townLoading(n[e.dataIndex])})}else t.$message.error("请检查网络！")})},townLoading:function(e){var t=this;this.slowflag=3;var a=document.getElementById("slowContainter"),i=l.init(a);i.showLoading({text:"加载加载加载....."}),o()({method:"post",url:o.a.PARK_API+"/xnhidc/backstage/getHospitalData_detail",data:n.a.stringify({sdate:this.startTime,edate:this.endTime,categoryCode:e,hospitalCode:this.hospitalId}),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){if(e.data.success){i.hideLoading(),l.dispose(i),i=l.init(a);for(var o=e.data.data,s=[],n=[],r=[],d=0;d<o.length;d++)s[d]=o[d].项目编码,n[d]=o[d].项目名称,r[d]=o[d].项目费用;var c={legend:{data:["项目费用"],align:"left",left:10},tooltip:{},dataZoom:[{id:"dataZoomX",type:"slider",xAxisIndex:[0],filterMode:"filter"},{id:"dataZoomY",type:"slider",yAxisIndex:[0],filterMode:"empty"}],xAxis:{type:"category",data:n},yAxis:{type:"value"},series:[{name:"项目费用",type:"bar",barMaxWidth:"60",data:r}]};i.setOption(c)}else t.$message.error("请检查网络！")})},backto:function(){""==this.slowflag?this.$message.warning("亲！已经是首层了"):1==this.slowflag?this.$message.warning("已经是第一级了"):2==this.slowflag?(this.getSlow(),console.log(this.slowflag)):3==this.slowflag&&this.areaLoading()},getCityChange:function(){var e=this;o()({method:"post",url:o.a.PARK_API+"/hospitalization/biz/analy/queryregion",params:{admincode:61,level:1}}).then(function(t){0==t.data.code?(e.cityoptions=t.data.data,e.getAreaCode()):e.$message.error("请检查网络")}).catch(function(e){})},cityChange:function(e){var t=this;console.log(e),this.area="",this.town="",o()({method:"post",url:o.a.PARK_API+"/hospitalization/biz/analy/queryregion",params:{admincode:e,level:2}}).then(function(e){0==e.data.code?(t.areaoptions=e.data.data,t.getAreaCode()):t.$message.error("请检查网络")})},areaChange:function(e){var t=this;this.town="",o()({method:"post",url:o.a.PARK_API+"/hospitalization/biz/analy/queryregion",params:{admincode:e,level:3}}).then(function(e){0==e.data.code?(t.townoptions=e.data.data,t.getAreaCode()):t.$message.error("请检查网络")})},getAreaCode:function(){return null!=this.town&&""!=this.town?this.town:null!=this.area&&""!=this.area?this.area:null!=this.city&&""!=this.city?this.city:""},selectOnchang:function(){var e=this,t=this.getAreaCode();o()({method:"post",url:o.a.PARK_API+"/xnhidc/tiaojian/getHospitals",data:n.a.stringify({hospitalGrade:this.grade,areaCode:t}),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(t){if(t.data.success){var a=t.data.data;e.hospitalCodes=a}else e.$message.error("请检查网络")})}},created:function(){this.getname(),this.getCityChange()}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"right-ctn-title"},[a("el-date-picker",{staticClass:"hosptDataSel",attrs:{size:"mini",type:"date","value-format":"yyyy-MM-dd",placeholder:"开始日期"},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}}),e._v("-\n         "),a("el-date-picker",{staticClass:"hosptDataSel",attrs:{size:"mini",type:"date","value-format":"yyyy-MM-dd",placeholder:"结束日期"},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.slow,expression:"slow"}]},[a("el-select",{attrs:{size:"mini",placeholder:"--选择市--"},on:{change:e.cityChange},model:{value:e.city,callback:function(t){e.city=t},expression:"city"}},e._l(e.cityoptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.d20120,value:e.d20102}})}),1),e._v(" "),a("el-select",{attrs:{size:"mini",placeholder:"--选择区县--"},on:{change:e.areaChange},model:{value:e.area,callback:function(t){e.area=t},expression:"area"}},e._l(e.areaoptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.d20120,value:e.d20102}})}),1),e._v(" "),a("el-select",{attrs:{size:"mini",placeholder:"--选择乡镇--"},model:{value:e.town,callback:function(t){e.town=t},expression:"town"}},e._l(e.townoptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.d20120,value:e.d20102}})}),1),e._v(" "),a("span",[e._v("医院等级：")]),e._v(" "),a("el-select",{attrs:{size:"mini",placeholder:"请选择医院等级"},on:{change:e.selectOnchang},model:{value:e.grade,callback:function(t){e.grade=t},expression:"grade"}},e._l(e.gradeoptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-select",{attrs:{size:"mini",placeholder:"请选择医院"},model:{value:e.hospitalCode,callback:function(t){e.hospitalCode=t},expression:"hospitalCode"}},e._l(e.hospitalCodes,function(e){return a("el-option",{key:e.value,attrs:{label:e.TEXT,value:e.VALUE}})}),1)],1),e._v(" "),a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"warning"},on:{click:e.getSlow}},[a("i",{staticClass:"el-icon-search"}),e._v("\n             查询\n         ")])],1),e._v(" "),a("div",{staticClass:"chart"},[a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"mini",type:"warning"},on:{click:e.backto}},[a("i",{staticClass:"el-icon-back"})]),e._v(" "),a("div",{style:{width:"100%",height:"470px"},attrs:{id:"slowContainter"}})],1)])},staticRenderFns:[]};var c=a("C7Lr")(r,d,!1,function(e){a("x/Rj")},"data-v-66c35cb0",null);t.default=c.exports},"x/Rj":function(e,t){}});