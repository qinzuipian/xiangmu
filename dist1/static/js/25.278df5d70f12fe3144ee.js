webpackJsonp([25],{Xdww:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("HzJ8"),o=a.n(i),s=a("6sKG"),n=a.n(s),l=a("P8yQ"),r={data:function(){return{warnTypes:[],closingDates:[{value:"1",label:"结算日期"},{value:"2",label:"处方日期"}],hospitalText:"",upShow:!1,warnType:"",closingDate:"1",startTime:"",endTime:"",botBtn:0,hospitalId:""}},mounted:function(){this.topChart(),this.topTog(),this.botTog()},methods:{Liactive:function(e){console.log(e.path[0].innerHTML),this.warnType=e.path[0].innerHTML,this.upShow=!1},warnTypeFocus:function(){var e=this;n()({method:"post",url:n.a.PARK_API+"/outpatient/biz/rstdatpresmsg/listMsgType",params:{type:""}}).then(function(t){0==t.data.code&&""!=t.data.data?(console.log(t.data.data),e.warnTypes=t.data.data,e.upShow=!0):e.$message("无此项目")}).catch(function(e){})},warnTypeBlur:function(){this.upShow=!1},queryHosSearch:function(e,t){var a=this,i=[{}];n()({method:"post",url:n.a.PARK_API+"/outpatient/biz/d101/list",params:{param:e.toUpperCase()}}).then(function(e){if(0==e.data.code&&""!=e.data.list){var s=!0,n=!1,l=void 0;try{for(var r,d=o()(e.data.list);!(s=(r=d.next()).done);s=!0){var h=r.value;"1"==a.queryend?h.value=h.d10101:h.value=h.d10102}}catch(e){n=!0,l=e}finally{try{!s&&d.return&&d.return()}finally{if(n)throw l}}i=e.data.list,t(i)}else a.$message("无此医院")}).catch(function(e){})},handleSelect:function(e){console.log(e),this.hospitalId=e.d10101},topChart:function(){localStorage.setItem("hometext","【门诊-违规趋势分析】");var e=l.init(document.getElementById("topChart"));e.showLoading({text:"加载加载加载....."}),n()({method:"post",url:n.a.PARK_API+"/outpatient/biz/analy/queryIrreCaseTimeanaly",data:{regionId:localStorage.getItem("regionId")},headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){for(var a=t.data.data,i=[],o=[],s=[],n=0;n<a.length;n++)i.push({value:a[n].seriousIrrenum}),o.push({value:a[n].baldate}),s.push({value:a[n].pronum});var l={tooltip:{trigger:"axis",formatter:'{b}<br />\t                \t<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:#7ace4c"></span>\t                \t{a0}：{c0}<br />\t                \t<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:#ffbb44"></span>\t                \t{a1}：{c1}%<br />\t                \t'},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,legend:{data:["","违规病例数","违规病历占比"]},dataZoom:[{type:"slider",show:!0,start:40,end:60,handleSize:30},{type:"inside",start:40,end:60},{type:"slider",show:!0,yAxisIndex:0,filterMode:"empty",width:12,height:"70%",handleSize:30,showDataShadow:!1,left:"5%"}],xAxis:[{type:"category",data:o}],yAxis:[{type:"value",name:"违规病例数",axisLabel:{formatter:"{value} 例"}},{type:"value",name:"违规病历占比",axisLabel:{formatter:"{value} %"}}],series:[{type:"bar"},{name:"违规病例数",type:"bar",data:i,barWidth:15,itemStyle:{normal:{color:"#4169E1"}}},{name:"违规病历占比",type:"line",yAxisIndex:1,smooth:!0,data:s,itemStyle:{normal:{lineStyle:{width:2}}}}]};e.hideLoading(),e.setOption(l)})},topChartSearch:function(){var e={};1==this.closingDate?(e.startbaldate=this.startTime,e.endbaldate=this.endTime,e.type=this.warnType,e.regionId=localStorage.getItem("regionId"),e.hospitalId=this.hospitalId):2==this.closingDate&&(e.startindate=this.startTime,e.endindate=this.endTime,e.type=this.warnType,e.regionId=localStorage.getItem("regionId"),e.hospitalId=this.hospitalId);var t=l.init(document.getElementById("topChart"));t.showLoading({text:"加载加载加载....."}),n()({method:"post",url:n.a.PARK_API+"/outpatient/biz/analy/queryIrreCaseTimeanaly",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(e){console.log(e);var a=e.data.data;console.log(a);for(var i=[],o=[],s=[],n=0;n<a.length;n++)i.push({value:a[n].seriousIrrenum}),o.push({value:a[n].baldate}),s.push({value:a[n].pronum});console.log(o);var l={tooltip:{trigger:"axis",formatter:'{b}<br />\t                \t<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:#7ace4c"></span>\t                \t{a0}：{c0}<br />\t                \t<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:#ffbb44"></span>\t                \t{a1}：{c1}%<br />\t                \t'},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,legend:{data:["","违规病例数","违规病历占比"]},dataZoom:[{type:"slider",show:!0,start:40,end:60,handleSize:30},{type:"inside",start:40,end:60},{type:"slider",show:!0,yAxisIndex:0,filterMode:"empty",width:12,height:"70%",handleSize:30,showDataShadow:!1,left:"5%"}],xAxis:[{type:"category",data:o}],yAxis:[{type:"value",name:"违规病例数",axisLabel:{formatter:"{value} 例"}},{type:"value",name:"违规病历占比",axisLabel:{formatter:"{value} %"}}],series:[{type:"bar"},{name:"违规病例数",type:"bar",data:i,barWidth:15,itemStyle:{normal:{color:"#4169E1"}}},{name:"违规病历占比",type:"line",yAxisIndex:1,smooth:!0,data:s,itemStyle:{normal:{lineStyle:{width:2}}}}]};t.hideLoading(),t.setOption(l)})},topTog:function(){var e=l.init(document.getElementById("topTog"));e.showLoading({text:"加载加载加载....."}),n()({method:"post",url:n.a.PARK_API+"/outpatient/biz/analy/queryIrreTrendanaly",data:{regionId:localStorage.getItem("regionId")},headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){for(var a=t.data.data,i=[],o=[],s=[],n=0;n<a.length;n++)i.push({value:a[n].seriousIrrenum}),o.push({value:a[n].hospitalName}),s.push({value:a[n].allIrrenum});var l={tooltip:{trigger:"axis"},dataZoom:[{type:"slider",show:!0,start:40,end:60,handleSize:30},{type:"inside",start:40,end:60},{type:"slider",show:!0,yAxisIndex:0,filterMode:"empty",width:12,height:"70%",handleSize:30,showDataShadow:!1,left:"5%"}],toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,legend:{data:["","违规病例数","总病例数"]},xAxis:[{type:"category",data:o}],yAxis:[{type:"value",name:"违规病例数",axisLabel:{formatter:"{value} 例"}},{type:"value",name:"总病例数",axisLabel:{formatter:"{value} 例"}}],series:[{type:"bar"},{name:"违规病例数",type:"bar",data:i,barWidth:15,itemStyle:{normal:{color:"#4169E1"}}},{name:"总病例数",type:"line",yAxisIndex:1,data:s,smooth:!0,itemStyle:{normal:{lineStyle:{width:2}}}}]};e.hideLoading(),e.setOption(l)})},topTopSearch:function(){var e={};1==this.closingDate?(e.startbaldate=this.startTime,e.endbaldate=this.endTime,e.type=this.warnType,e.regionId=localStorage.getItem("regionId"),e.hospitalId=this.hospitalId):2==this.closingDate?(e.startindate=this.startTime,e.endindate=this.endTime,e.type=this.warnType,e.regionId=localStorage.getItem("regionId"),e.hospitalId=this.hospitalId):3==this.closingDate&&(e.endoutdate=this.startTime,e.startoutdate=this.endTime,e.regionId=localStorage.getItem("regionId"),e.type=this.warnType,e.hospitalId=this.hospitalId);var t=l.init(document.getElementById("topTog"));t.showLoading({text:"加载加载加载....."}),n()({method:"post",url:n.a.PARK_API+"/outpatient/biz/analy/queryIrreTrendanaly",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(e){console.log(e);var a=e.data.data;console.log(a);for(var i=[],o=[],s=[],n=0;n<a.length;n++)i.push({value:a[n].seriousIrrenum}),o.push({value:a[n].hospitalName}),s.push({value:a[n].allIrrenum});console.log(o);var l={tooltip:{trigger:"axis"},dataZoom:[{type:"slider",show:!0,start:40,end:60,handleSize:30},{type:"inside",start:40,end:60},{type:"slider",show:!0,yAxisIndex:0,filterMode:"empty",width:12,height:"70%",handleSize:30,showDataShadow:!1,left:"5%"}],toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,legend:{data:["","违规病例数","总病例数"]},xAxis:[{type:"category",data:o}],yAxis:[{type:"value",name:"违规病例数",axisLabel:{formatter:"{value} 例"}},{type:"value",name:"总病例数",axisLabel:{formatter:"{value} 例"}}],series:[{type:"bar"},{name:"违规病例数",type:"bar",data:i,barWidth:15,itemStyle:{normal:{color:"#4169E1"}}},{name:"总病例数",type:"line",yAxisIndex:1,data:s,smooth:!0,itemStyle:{normal:{lineStyle:{width:2}}}}]};t.hideLoading(),t.setOption(l)})},botTog:function(){var e=l.init(document.getElementById("botTog"));e.showLoading({text:"加载加载加载....."}),n()({method:"post",url:n.a.PARK_API+"/outpatient/biz/analy/queryIrreTrendTimeanaly",data:{regionId:localStorage.getItem("regionId")},headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){for(var a=t.data.data,i=[],o=[],s=[],n=0;n<a.length;n++)i.push({value:a[n].seriousIrrenum}),o.push({value:a[n].baldate}),s.push({value:a[n].allIrrenum});var l={tooltip:{trigger:"axis"},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},dataZoom:[{type:"slider",show:!0,start:40,end:60,handleSize:30},{type:"inside",start:40,end:60},{type:"slider",show:!0,yAxisIndex:0,filterMode:"empty",width:12,height:"70%",handleSize:30,showDataShadow:!1,left:"5%"}],calculable:!0,legend:{data:["","违规病例数","总病例数"]},xAxis:[{type:"category",data:o}],yAxis:[{type:"value",name:"违规病例数",axisLabel:{formatter:"{value} 例"}},{type:"value",name:"总病例数",axisLabel:{formatter:"{value} 例"}}],series:[{type:"bar"},{name:"违规病例数",type:"bar",data:i,barWidth:15,itemStyle:{normal:{color:"#4169E1"}}},{name:"总病例数",type:"line",yAxisIndex:1,data:s,smooth:!0,itemStyle:{normal:{lineStyle:{width:2}}}}]};e.hideLoading(),e.setOption(l)})},botTogSearch:function(){var e={};1==this.closingDate?(e.startbaldate=this.startTime,e.endbaldate=this.endTime,e.type=this.warnType,e.regionId=localStorage.getItem("regionId"),e.hospitalId=this.hospitalId):2==this.closingDate?(e.startindate=this.startTime,e.endindate=this.endTime,e.type=this.warnType,e.regionId=localStorage.getItem("regionId"),e.hospitalId=this.hospitalId):3==this.closingDate&&(e.endoutdate=this.startTime,e.startoutdate=this.endTime,e.type=this.warnType,e.regionId=localStorage.getItem("regionId"),e.hospitalId=this.hospitalId);var t=l.init(document.getElementById("botTog"));t.showLoading({text:"加载加载加载....."}),n()({method:"post",url:n.a.PARK_API+"/outpatient/biz/analy/queryIrreTrendTimeanaly",data:e,headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(e){console.log(e);var a=e.data.data;console.log(a);for(var i=[],o=[],s=[],n=0;n<a.length;n++)i.push({value:a[n].seriousIrrenum}),o.push({value:a[n].baldate}),s.push({value:a[n].allIrrenum});console.log(o);var l={tooltip:{trigger:"axis"},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},dataZoom:[{type:"slider",show:!0,start:40,end:60,handleSize:30},{type:"inside",start:40,end:60},{type:"slider",show:!0,yAxisIndex:0,filterMode:"empty",width:12,height:"70%",handleSize:30,showDataShadow:!1,left:"5%"}],calculable:!0,legend:{data:["","违规病例数","总病例数"]},xAxis:[{type:"category",data:o}],yAxis:[{type:"value",name:"违规病例数",axisLabel:{formatter:"{value} 例"}},{type:"value",name:"总病例数",axisLabel:{formatter:"{value} 例"}}],series:[{type:"bar"},{name:"违规病例数",type:"bar",data:i,barWidth:15,itemStyle:{normal:{color:"#4169E1"}}},{name:"总病例数",type:"line",yAxisIndex:1,data:s,smooth:!0,itemStyle:{normal:{lineStyle:{width:2}}}}]};t.hideLoading(),t.setOption(l)})},PolygonSearch:function(){this.topChartSearch(),this.topTopSearch(),this.botTogSearch()}},created:function(){}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"right-ctn-title"},[a("div",{staticClass:"top"},[a("span",{staticClass:"foulfont"},[e._v("违规病例变化趋势")]),e._v(" "),a("div",{staticClass:"selectype"},[a("span",[e._v("警示类型：")]),e._v(" "),a("el-input",{staticStyle:{width:"140px"},attrs:{size:"mini",placeholder:"请输入内容"},on:{focus:e.warnTypeFocus,blur:e.warnTypeBlur},model:{value:e.warnType,callback:function(t){e.warnType=t},expression:"warnType"}}),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:e.upShow,expression:"upShow"}],staticClass:"upText"},e._l(e.warnTypes,function(t,i){return a("li",{key:i,staticClass:"Liactive",on:{mousedown:e.Liactive}},[e._v(e._s(t))])}),0),e._v(" "),a("el-select",{attrs:{size:"mini",placeholder:"结算日期"},model:{value:e.closingDate,callback:function(t){e.closingDate=t},expression:"closingDate"}},e._l(e.closingDates,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v("：\n                    "),a("el-date-picker",{staticClass:"hosptDataSel",attrs:{size:"mini",type:"date","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}}),e._v("-\n                    "),a("el-date-picker",{staticClass:"hosptDataSel",attrs:{size:"mini",type:"date","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}}),e._v(" "),a("span",[e._v("医院名称：")]),e._v(" "),a("el-autocomplete",{attrs:{"fetch-suggestions":e.queryHosSearch,placeholder:"请输入内容"},on:{select:e.handleSelect},model:{value:e.hospitalText,callback:function(t){e.hospitalText=t},expression:"hospitalText"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"6px"},attrs:{size:"mini",type:"primary"},on:{click:e.PolygonSearch}},[e._v("查询")])],1)]),e._v(" "),a("div",{staticClass:"bottom"},[a("div",{staticClass:"topChart",style:{width:"100%",height:"360px"},attrs:{id:"topChart"}}),e._v(" "),a("div",{staticClass:"botChart"},[a("div",{staticClass:"top"},[a("span",{staticClass:"foulfont"},[e._v("违规病例医院/时间分布")]),e._v(" "),a("div",{staticClass:"toggleBtn"},[a("el-button",{class:{active:0==e.botBtn},attrs:{type:"primary",size:"mini"},on:{click:function(t){e.botBtn=0}}},[e._v("按医院")]),e._v(" "),a("el-button",{class:{active:1==e.botBtn},attrs:{type:"primary",size:"mini"},on:{click:function(t){e.botBtn=1}}},[e._v("按时间")])],1)]),e._v(" "),a("div",{staticClass:"togChart"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.botBtn,expression:"botBtn == 0"}],style:{width:"100%",height:"100%"},attrs:{id:"topTog"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.botBtn,expression:"botBtn == 1"}],style:{width:"1349px",height:"360px"},attrs:{id:"botTog"}})])])])])])},staticRenderFns:[]};var h=a("C7Lr")(r,d,!1,function(e){a("u0k5")},"data-v-6b24327a",null);t.default=h.exports},u0k5:function(e,t){}});